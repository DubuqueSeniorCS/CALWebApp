<html>

<head>
    <link rel="stylesheet" href="labreport.css">
    <link rel="stylesheet" type="text/css" href="./css/sabrinacss.css">
    <link rel="stylesheet" type="text/css" href="./css/normalize.css">
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <title>Gravity Lab</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
</head>

<body>

    <h1 id="title">Lab Report</h1>

    <h2 id="challenge-type">Gravity Challenge </h2>

    <p> What kind of structure allows you to build farthest from the wall?</p>

    <label> What are you going to try?</label>

    <textarea id="plan" placeholder="Record your plan and predictions here!"></textarea>

    <br>

    <label> What happened when you tested your plan? </label>

    <textarea id="prediction" placeholder="Record your results here!"></textarea>

    <input type="file" onchange="previewFile()">
    <br>
    <img src="" height="200" alt="Image preview...">
    <br>
    <button onclick="printToPdf()">Save my Report!</button>

    <h1>Ready to move on to something new?</h1>
    <h2>CLICK BELOW!</h2>
  
    <br>
    <a href="lightLabReport.html"><img src="https://static1.squarespace.com/static/589a3a502e69cf66eed974fa/5a393353e4966b9ea4cd5860/5a3943c8652dea6c079c7386/1513702388953/Screen+Shot+2017-12-19+at+10.44.17+AM.png?format=750w" width="350"></a>
     <br>
    <br>
    <a href = "index.html">
    <button>Click Here to Return Home!</button>
    </a>
    <script>
        var imgData;

        function previewFile() {
            var preview = document.querySelector('img'); //selects the query named img
            var file = document.querySelector('input[type=file]').files[0]; //sames as here
            var reader = new FileReader();
            reader.onloadend = function () {
                preview.src = reader.result;
                imgData = reader.result;
            }
            if (file) {
                reader.readAsDataURL(file); //reads the data as a URL
            } else {
                preview.src = "";
            }
        }

        function printToPdf() {
            var doc = new jsPDF();
            doc.setFontSize(35);
            doc.text(25, 25, 'Gravity Challenge');
            doc.text(25, 35, 'Lab Report');
            doc.setFontSize(24);
            doc.text(25, 45, 'Goal: Build the farthest structure from the wall');
            doc.text(25, 55, 'What did you try?');
            doc.text(25, 65, document.getElementById("plan").value);
            doc.text(25, 75, 'What happened when you tested your plan?');
            doc.text(25, 85, document.getElementById("prediction").value);
            if(imgData != null){
                doc.addImage(imgData, 'JPEG', 15, 40, 180, 160);
            }
            doc.save('gravitylab.pdf');
        }
    </script>
</body>

</html>
